{"ast":null,"code":"import _regeneratorRuntime from \"/home/its/project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/its/project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      swiperOptions: {\n        breakpoints: {\n          320: {\n            slidesPerView: 1\n          },\n          1200: {\n            slidesPerView: 2\n          }\n        }\n      },\n      event: {},\n      isBtn: true\n    };\n  },\n  computed: {\n    formatData: function formatData(e) {\n      return moment(e.created_at).format(\"DD MMMM\");\n    },\n    weekDay: function weekDay() {\n      var now = new Date();\n      var today = new Date(new Date().valueOf() + 1000 * 3600 * 24);\n      var other = new Date(this.event.dates.date.full);\n\n      if (other < today - 86400000 || other > today - 86400000) {\n        return moment(other).format(\"dddd\")[0].toUpperCase() + moment(other).format(\"dddd\").slice(1);\n      } else if (other < today) {\n        return \"Вчера\";\n      } else {\n        return \"Сегодня\";\n      }\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _yield$_this$$api$eve, data;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _this.$api.event.onceEvent(_this.$route.params.id);\n\n            case 3:\n              _yield$_this$$api$eve = _context.sent;\n              data = _yield$_this$$api$eve.data;\n              _this.event = data.event;\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.message);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }))();\n  },\n  methods: {\n    getImageUrl: function getImageUrl(imageId) {\n      return \"https://picsum.photos/600/400/?image=\".concat(imageId);\n    },\n    moment: function (_moment) {\n      function moment() {\n        return _moment.apply(this, arguments);\n      }\n\n      moment.toString = function () {\n        return _moment.toString();\n      };\n\n      return moment;\n    }(function () {\n      return moment();\n    }),\n    getImages: function getImages() {\n      this.isBtn = false;\n    },\n    severalDay: function severalDay() {\n      var _this2 = this;\n\n      this.event.dates.items.time.full.forEach(function (element) {\n        if (_this2.event.dates.items.time.full != _this2.event.dates.time.full) {\n          console.log(1);\n          return false;\n        } else return true;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmSA;EACAA,IADA,kBACA;IACA;MACAC;QACAC;UACA;YACAC;UADA,CADA;UAIA;YACAA;UADA;QAJA;MADA,CADA;MAWAC,SAXA;MAYAC;IAZA;EAcA,CAhBA;EAiBAC;IACAC,UADA,sBACAC,CADA,EACA;MACA;IACA,CAHA;IAIAC,OAJA,qBAIA;MACA;MACA;MACA;;MACA;QACA,OACAC,gDACAA,qCAFA;MAIA,CALA,MAKA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;EAlBA,CAjBA;EAqCAC,OArCA,qBAqCA;IAAA;;IAAA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,OAEA,kDAFA;;YAAA;cAAA;cAEAX,IAFA,yBAEAA,IAFA;cAGA;cAHA;cAAA;;YAAA;cAAA;cAAA;cAKAY;;YALA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAOA,CA5CA;EA8CAC;IACAC,WADA,uBACAC,OADA,EACA;MACA;IACA,CAHA;IAIAL;MAAA;QAAA;MAAA;;MAAA;QAAA;MAAA;;MAAA;IAAA;MACA;IACA,CAFA,CAJA;IAOAM,SAPA,uBAOA;MACA;IACA,CATA;IAUAC,UAVA,wBAUA;MAAA;;MACA;QACA;UACAL;UACA;QACA,CAHA,MAIA;MACA,CANA;IAOA;EAlBA;AA9CA","names":["data","swiperOptions","breakpoints","slidesPerView","event","isBtn","computed","formatData","e","weekDay","moment","created","console","methods","getImageUrl","imageId","getImages","severalDay"],"sourceRoot":"src/pages/events","sources":["_id.vue"],"sourcesContent":["<template>\n  <div class=\"event\">\n    <div class=\"container\">\n      <div class=\"event__wrapper\">\n        <AppNavbar />\n        <main class=\"event-page\">\n          <section>\n            <h3 class=\"event__subtitle\">\n              {{ event.category }} • {{ event.age }}\n              <router-link\n                :to=\"{\n                  name: 'settingsId',\n                  params: { id: event.id, slug: event.slug },\n                }\"\n              >\n                <svg\n                  width=\"16\"\n                  height=\"4\"\n                  viewBox=\"0 0 16 4\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M2 0C0.9 0 0 0.9 0 2C0 3.1 0.9 4 2 4C3.1 4 4 3.1 4 2C4 0.9 3.1 0 2 0ZM14 0C12.9 0 12 0.9 12 2C12 3.1 12.9 4 14 4C15.1 4 16 3.1 16 2C16 0.9 15.1 0 14 0ZM8 0C6.9 0 6 0.9 6 2C6 3.1 6.9 4 8 4C9.1 4 10 3.1 10 2C10 0.9 9.1 0 8 0Z\"\n                    fill=\"#333333\"\n                  />\n                </svg>\n              </router-link>\n            </h3>\n            <h1 class=\"event__title\">\n              {{ event.title }}\n            </h1>\n            <div class=\"event__user\">\n              <div class=\"event__user-wrapper\">\n                <img\n                  :src=\"`${event.author.main_photo.avatar}`\"\n                  class=\"event__user-avatar\"\n                  alt=\"\"\n                />\n                <img\n                  v-if=\"event.coauthor\"\n                  :src=\"`${event.coauthor}`\"\n                  class=\"event__user-avatar_under\"\n                  alt=\"\"\n                />\n              </div>\n              <div class=\"event__user-info\">\n                <p class=\"event__user-name\">\n                  <span>{{ event.author.name }}</span\n                  ><span></span>\n                </p>\n                <p class=\"event__user-date\">{{ formatData }}</p>\n              </div>\n            </div>\n            <div\n              v-if=\"event.dates.date.to === event.dates.date.from\"\n              class=\"event__schedule-title\"\n            >\n              <span>\n                {{ moment(event.dates.date.full).format(\"DD MMMM\") }}</span\n              >\n              <span>\n                <span>{{ weekDay }}</span> {{ event.dates.time.from }} -\n                {{ event.dates.time.to }}</span\n              >\n            </div>\n            <div   v-else-if=\"severalDay\"\n              class=\"event__schedule-title\">\n                <span>\n                  {{event.dates}}\n                  {{ moment(event.dates.date.from).format(\"DD MMMM\") }} - {{ moment(event.dates.date.to).format(\"DD MMMM\") }}\n            </span\n              >\n              <span>\n                <span>Ежедневно</span> {{ event.dates.time.from }} -\n                {{ event.dates.time.to }}</span\n              ></div>\n         <!--    <ul\n              v-if=\"event.dates.date.to !== event.dates.date.from\"\n              class=\"event__schedule\"\n            >\n              <li\n                v-for=\"(item, index) in event.dates.items\"\n                :key=\"index\"\n                class=\"event__item\"\n              >\n                <span class=\"event__item-date\">{{ item.day }}</span>\n                <span v-if=\"item.time.from\" class=\"event__item-time\">\n                  {{ item.time.from }} – {{ item.time.from }}</span\n                >\n              </li>\n            </ul> -->\n            <div class=\"event__gallery\">\n              <img\n                :src=\"`${event.main_photo.avatar}`\"\n                class=\"event__gallery-img_main\"\n                alt=\"\"\n              />\n              <div v-if=\"event.photos.length\" class=\"event__gallery-wrapper\">\n                <img\n                  :src=\"`${event.photos[0].url}`\"\n                  class=\"event__gallery-img\"\n                  alt=\"\"\n                />\n                <div v-if=\"event.photos[1]\" class=\"event__button-wrapper\">\n                  <img\n                    :src=\"`${event.photos[1].url}`\"\n                    class=\"event__gallery-img\"\n                    alt=\"\"\n                  />\n                  <button v-if=\"isBtn\" @click=\"getImages\">\n                    + {{ event.photos.length - 1 }} еще\n                  </button>\n                </div>\n              </div>\n              <div\n                v-if=\"!isBtn && event.photos.length\"\n                class=\"event__img-wrapper\"\n              >\n                <img\n                  v-for=\"(images, index) in event.photos.length - 2\"\n                  :key=\"index\"\n                  :src=\"`${event.photos[index + 2].url}`\"\n                  class=\"event__gallery-img\"\n                  alt=\"\"\n                />\n              </div>\n            </div>\n            <swiper\n              :loop=\"false\"\n              :pagination=\"true\"\n              :spaceBetween=\"15\"\n              :breakpoints=\"swiperOptions.breakpoints\"\n              class=\"swiper event__swipper_media\"\n            >\n              <swiper-slide v-for=\"n in 5\" :key=\"n\">\n                <img\n                  :src=\"getImageUrl(29 + n)\"\n                  width=\"100%\"\n                  height=\"360\"\n                  blank=\"true\"\n                  class=\"swiper-img\"\n                />\n              </swiper-slide>\n            </swiper>\n            <p v-html=\"event.descr\" class=\"event__text\"></p>\n          </section>\n          <section class=\"event__location\">\n            <h3 class=\"event__title_default\">Место проведения</h3>\n            <app-map />\n            <p class=\"event__text\">\n              {{ event.address }}\n            </p>\n            <button class=\"default__map-btn_media\">\n              Проложить маршрут\n              <svg\n                width=\"24\"\n                height=\"25\"\n                viewBox=\"0 0 24 25\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M7.90993 5.08001C8.68993 5.86001 8.68993 7.12001 7.90993 7.90001C7.11993 8.68001 5.85993 8.68001 5.07993 7.90001C4.28993 7.11001 4.28993 5.85001 5.07893 5.07001C5.85893 4.28001 7.11893 4.28001 7.89893 5.06901\"\n                  stroke=\"white\"\n                  stroke-width=\"1.5\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n                <path\n                  d=\"M12.2297 18.5H8.61975C7.15975 18.5 5.98975 17.157 5.98975 15.5V15.49C5.98975 13.83 7.15975 12.49 8.60975 12.49H15.3497C16.7997 12.49 17.9697 11.147 17.9697 9.49002C17.9697 7.83002 16.7897 6.48802 15.3397 6.49002H11.2197\"\n                  stroke=\"white\"\n                  stroke-width=\"1.5\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n                <path\n                  d=\"M16.3397 20.684L19.2197 18.974C19.5797 18.754 19.5797 18.234 19.2197 18.024L16.3297 16.314C15.9497 16.094 15.4897 16.354 15.4897 16.784V20.194C15.4897 20.624 15.9497 20.884 16.3297 20.664L16.3397 20.684Z\"\n                  stroke=\"white\"\n                  stroke-width=\"1.5\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </button>\n          </section>\n          <section class=\"event__conditions\">\n            <h3 class=\"event__title_default\">Условия события</h3>\n            <div class=\"event__conditions-info\">\n              <div class=\"event__conditions-item\">\n                <span class=\"event__conditions-subtitle\"\n                  >Количество участников:</span\n                >\n                <span class=\"event__conditions-title\"\n                  >{{ event.count_seats }} человек</span\n                >\n              </div>\n              <div class=\"event__conditions-item\">\n                <span class=\"event__conditions-subtitle\">Возраст:</span>\n                <span class=\"event__conditions-title\">{{ event.age }}</span>\n              </div>\n              <div class=\"event__conditions-item\">\n                <span class=\"event__conditions-subtitle\">Пол:</span>\n                <span class=\"event__conditions-title\">{{ event.sex }}</span>\n              </div>\n            </div>\n          </section>\n          <section v-if=\"event.users.length\" class=\"event__users\">\n            <h3 class=\"event__title_default\">Участники</h3>\n            <div class=\"event__users-list\">\n              <a v-for=\"(user, index) in event.users\" :key=\"index\" href=\"#\">\n                <div class=\"event__users-item\">\n                  <img\n                    :src=\"`${user.main_photo.avatar}`\"\n                    class=\"event__img\"\n                    alt=\"\"\n                  />\n                  {{ user.name }}\n                </div>\n              </a>\n            </div>\n            <div class=\"event__buttons-wrapper\">\n              <button class=\"default-button default-button__icon\">\n                <svg\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M6.944 19H5.056C4.466 19 4 18.52 4 17.94V10.55C4 9.95999 4.47 9.48999 5.056 9.48999H6.944C7.524 9.48999 8 9.95999 8 10.54V17.92C8 18.5 7.52 18.97 6.944 18.97V19Z\"\n                    stroke=\"#333333\"\n                    stroke-width=\"1.5\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  />\n                  <path\n                    d=\"M7.99994 10.57L11.6399 5.81904C12.3099 4.92904 13.6399 4.91204 14.3499 5.76904C14.6099 6.08904 14.7499 6.48904 14.7499 6.91004V10.18H17.8459C18.4459 10.18 19.0059 10.48 19.3359 10.97L19.6559 11.46C19.9459 11.9 20.0359 12.45 19.8859 12.95L18.5259 17.67C18.2959 18.44 17.5959 18.97 16.7959 18.97H10.4999C9.99994 18.97 9.51994 18.76 9.17994 18.39L7.93994 17.06\"\n                    stroke=\"#333333\"\n                    stroke-width=\"1.5\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  />\n                </svg>\n              </button>\n              <button class=\"default-button default-button__icon\">\n                <svg\n                  width=\"16\"\n                  height=\"20\"\n                  viewBox=\"0 0 16 20\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M3.69995 0.99999H12.3C13.4 0.99999 14.3 1.89499 14.3 2.99999V19L7.99995 15.72L1.69995 18.99V2.98999C1.69995 1.88499 2.58995 0.98999 3.69995 0.98999V0.99999Z\"\n                    stroke=\"#333333\"\n                    stroke-width=\"1.5\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  />\n                </svg>\n              </button>\n              <button class=\"default-button default-button__icon\">\n                <svg\n                  width=\"24\"\n                  height=\"24\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M13 14.329C8.406 14.329 4.501 16.692 3 20V18.993C3 12.977 7.421 8.07 13 7.702V3L21 11L13 19V14.333\"\n                    stroke=\"#323232\"\n                    stroke-width=\"1.5\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  />\n                </svg>\n              </button>\n              <button class=\"default-button__red event-button__red\">\n                Я иду\n              </button>\n            </div>\n          </section>\n        </main>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      swiperOptions: {\n        breakpoints: {\n          320: {\n            slidesPerView: 1,\n          },\n          1200: {\n            slidesPerView: 2,\n          },\n        },\n      },\n      event: {},\n      isBtn: true,\n    };\n  },\n  computed: {\n    formatData(e) {\n      return moment(e.created_at).format(\"DD MMMM\");\n    },\n    weekDay() {\n      let now = new Date();\n      let today = new Date(new Date().valueOf() + 1000 * 3600 * 24);\n      let other = new Date(this.event.dates.date.full);\n      if (other < today - 86400000 || other > today - 86400000 ) {\n        return (\n          moment(other).format(\"dddd\")[0].toUpperCase() +\n          moment(other).format(\"dddd\").slice(1)\n        );\n      } else if (other < today) {\n        return \"Вчера\";\n      } else {\n        return \"Сегодня\"\n      }\n    },\n  },\n  async created() {\n    try {\n      let { data } = await this.$api.event.onceEvent(this.$route.params.id);\n      this.event = data.event;\n    } catch (e) {\n      console.log(e.message);\n    }\n  },\n\n  methods: {\n    getImageUrl(imageId) {\n      return `https://picsum.photos/600/400/?image=${imageId}`;\n    },\n    moment: function () {\n      return moment();\n    },\n    getImages() {\n      this.isBtn = false;\n    },\n    severalDay(){\n      this.event.dates.items.time.full.forEach(element => {\n        if(this.event.dates.items.time.full!= this.event.dates.time.full){\n          console.log(1)\n          return false\n        }\n        else return true\n      });\n    }\n  },\n};\n</script>"]},"metadata":{},"sourceType":"module"}