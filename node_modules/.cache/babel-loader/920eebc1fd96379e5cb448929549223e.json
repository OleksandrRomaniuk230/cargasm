{"ast":null,"code":"import _defineProperty from \"/home/its/project/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/home/its/project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/its/project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _mutations;\n\nimport Cookie from 'js-cookie';\nvar SET_TOKEN = 'SET_TOKEN';\nexport default {\n  namespaced: true,\n  state: {\n    token: Cookie.get('token') || null\n  },\n  getters: {\n    token: function token(state) {\n      return state.token;\n    }\n  },\n  actions: {\n    login: function login(_ref, payload) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var dispatch, commit, _yield$_this$$api$aut, data;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch = _ref.dispatch, commit = _ref.commit;\n                _context.next = 3;\n                return _this.$api.auth.login(payload);\n\n              case 3:\n                _yield$_this$$api$aut = _context.sent;\n                data = _yield$_this$$api$aut.data;\n                _context.next = 7;\n                return commit('SET_TOKEN', data.data);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  },\n  mutations: (_mutations = {}, _defineProperty(_mutations, SET_TOKEN, function (state, payload) {\n    if (payload.accessToken !== undefined) {\n      Cookie.set('token', payload.accessToken);\n      state.token = payload.accessToken;\n    }\n  }), _defineProperty(_mutations, PROFILE, function (state, payload) {\n    state.profile = payload;\n  }), _defineProperty(_mutations, LOGAUT, function (state) {\n    console.log('mutation');\n    Cookie.remove('token');\n    Cookie.remove('refreshToken');\n    Cookie.remove('permissions');\n    Cookie.remove('userId');\n    state.token = null;\n    state.refreshToken = null;\n    state.permissions = null;\n    state.userId = null;\n  }), _mutations)\n};","map":{"version":3,"names":["Cookie","SET_TOKEN","namespaced","state","token","get","getters","actions","login","payload","dispatch","commit","$api","auth","data","mutations","accessToken","undefined","set","PROFILE","profile","LOGAUT","console","log","remove","refreshToken","permissions","userId"],"sources":["/home/its/project/src/store/auth.js"],"sourcesContent":["import Cookie from 'js-cookie';\n\nconst SET_TOKEN = 'SET_TOKEN'\n\n\nexport default {\n  namespaced: true,\n  state: {\n      token: Cookie.get('token') || null,\n  },\n\n  getters: {\n    token: state => state.token,\n  },\n\n  actions: {\n    async login({dispatch, commit}, payload) {\n      let { data } = await this.$api.auth.login(payload)\n      await commit('SET_TOKEN', data.data)\n      // return data\n    },\n  },\n  mutations: {\n    [SET_TOKEN](state, payload) {\n      if (payload.accessToken !== undefined) {\n        Cookie.set('token', payload.accessToken)\n        state.token = payload.accessToken\n\n      }\n    },\n    [PROFILE](state, payload) {\n        state.profile = payload\n    },\n    [LOGAUT](state) {\n      console.log('mutation')\n      Cookie.remove('token')\n      Cookie.remove('refreshToken')\n      Cookie.remove('permissions')\n      Cookie.remove('userId')\n      state.token = null\n      state.refreshToken = null\n      state.permissions = null\n      state.userId = null\n    }\n  },\n};\n"],"mappings":";;;;;;AAAA,OAAOA,MAAP,MAAmB,WAAnB;AAEA,IAAMC,SAAS,GAAG,WAAlB;AAGA,eAAe;EACbC,UAAU,EAAE,IADC;EAEbC,KAAK,EAAE;IACHC,KAAK,EAAEJ,MAAM,CAACK,GAAP,CAAW,OAAX,KAAuB;EAD3B,CAFM;EAMbC,OAAO,EAAE;IACPF,KAAK,EAAE,eAAAD,KAAK;MAAA,OAAIA,KAAK,CAACC,KAAV;IAAA;EADL,CANI;EAUbG,OAAO,EAAE;IACDC,KADC,uBACyBC,OADzB,EACkC;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAA5BC,QAA4B,QAA5BA,QAA4B,EAAlBC,MAAkB,QAAlBA,MAAkB;gBAAA;gBAAA,OAClB,KAAI,CAACC,IAAL,CAAUC,IAAV,CAAeL,KAAf,CAAqBC,OAArB,CADkB;;cAAA;gBAAA;gBACjCK,IADiC,yBACjCA,IADiC;gBAAA;gBAAA,OAEjCH,MAAM,CAAC,WAAD,EAAcG,IAAI,CAACA,IAAnB,CAF2B;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIxC;EALM,CAVI;EAiBbC,SAAS,gDACNd,SADM,YACKE,KADL,EACYM,OADZ,EACqB;IAC1B,IAAIA,OAAO,CAACO,WAAR,KAAwBC,SAA5B,EAAuC;MACrCjB,MAAM,CAACkB,GAAP,CAAW,OAAX,EAAoBT,OAAO,CAACO,WAA5B;MACAb,KAAK,CAACC,KAAN,GAAcK,OAAO,CAACO,WAAtB;IAED;EACF,CAPM,+BAQNG,OARM,YAQGhB,KARH,EAQUM,OARV,EAQmB;IACtBN,KAAK,CAACiB,OAAN,GAAgBX,OAAhB;EACH,CAVM,+BAWNY,MAXM,YAWElB,KAXF,EAWS;IACdmB,OAAO,CAACC,GAAR,CAAY,UAAZ;IACAvB,MAAM,CAACwB,MAAP,CAAc,OAAd;IACAxB,MAAM,CAACwB,MAAP,CAAc,cAAd;IACAxB,MAAM,CAACwB,MAAP,CAAc,aAAd;IACAxB,MAAM,CAACwB,MAAP,CAAc,QAAd;IACArB,KAAK,CAACC,KAAN,GAAc,IAAd;IACAD,KAAK,CAACsB,YAAN,GAAqB,IAArB;IACAtB,KAAK,CAACuB,WAAN,GAAoB,IAApB;IACAvB,KAAK,CAACwB,MAAN,GAAe,IAAf;EACD,CArBM;AAjBI,CAAf"},"metadata":{},"sourceType":"module"}